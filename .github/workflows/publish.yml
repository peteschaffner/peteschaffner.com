name: Publish Website

on:
    push:
        branches: [ master ]

jobs:
    publish:
        runs-on: macos-latest
        steps:
            - uses: actions/checkout@v2
            - name: Build website
              run: swift run PeteSchaffner --removeDrafts
            - name: Publish website
              run: expect -c "spawn bash -c {echo \"put -r Output/*\" | sftp 3643620@sftp.sd3.gpaas.net:vhosts/lauraschaffner.com/htdocs}; expect \"*password:*\"; send \"${{ secrets.PASSWORD }}\r\"; expect \"*fingerprint])?*\"; send \"yes\r\"; interact"