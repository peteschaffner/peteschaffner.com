name: Publish Website

on:
    push:
        branches: [ master ]

jobs:
    publish:
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v2
            - name: Start up SSH agent
              run: eval "$(ssh-agent -s)"
            - name: Add SSH key
              env:
                  PRIVATE_KEY: ${{ secrets.PRIVATE_KEY }}
              run: ssh-add - <<< "${PRIVATE_KEY}"
            - name: Publish website
              run: make publish